################################################################################
# JSON-Testbench Configuration File
################################################################################

# Optional Meta Data #
Company: 
Engineer: 
Project_Name: 
Target_Devices: 
Tool_Versions: 
Description: 
Dependencies: 

# Required Data #
Module_Name: am_rx
Timescale: 1ns / 1ps #the default timescale of the simulation

################################################################################

# DUT #
DUT:
  - {direction: input, name: ap_clk, type: clock, period: 20ns}
  - {direction: input, name: ap_rst_n}
  - {direction: output, size: 32, name: dbg_currentState}
  - {direction: master, name: axis_handler, type: axis, clock: ap_clk, interface: [
      {name: "TDATA", type: "tdata", size: 64},
      {name: "TVALID", type: "tvalid"},
      {name: "TREADY", type: "tready"},
      {name: "TLAST", type: "tlast"}
    ]}
  - {direction: slave, name: axis_net, type: axis, clock: ap_clk, interface: [
      {name: "TDATA", type: "tdata", size: 64},
      {name: "TVALID", type: "tvalid"},
      {name: "TREADY", type: "tready"},
      {name: "TLAST", type: "tlast"}
    ]}
  - {direction: master, name: axis_s2mmCommand, type: axis, clock: ap_clk, interface: [
      {name: "TDATA", type: "tdata", size: 64},
      {name: "TVALID", type: "tvalid"},
      {name: "TREADY", type: "tready"},
      {name: "TLAST", type: "tlast"}
    ]}
  - {direction: master, name: axis_s2mm, type: axis, clock: ap_clk, interface: [
      {name: "TDATA", type: "tdata", size: 64},
      {name: "TVALID", type: "tvalid"},
      {name: "TREADY", type: "tready"},
      {name: "TLAST", type: "tlast"}
    ]}
  - {direction: slave, name: axis_s2mmStatus, type: axis, clock: ap_clk, interface: [
      {name: "TDATA", type: "tdata", size: 8},
      {name: "TVALID", type: "tvalid"},
      {name: "TREADY", type: "tready"},
      {name: "TLAST", type: "tlast"}
    ]}
  - {direction: output, name: release_V}

Test_Vectors:
  - Test_Vector_0:
    - Parallel_Section_0:
      - macro: INIT_SIGNALS
      - delay: 50ns
      - signal: [{name: ap_rst_n, value: 1}, {name: "axis_handler_TREADY", value: 1}]
      - wait: {key: "axis_handler_tvalid", value: 1}
    - Parallel_Section_1:
      - delay: 100ns
      - timestamp: Start
      - axis: {name: axis_net, payload: [
        {data: "{AMHeader,0xAA,0xCC,0,0xE,1,2}", keep: "ALL", callTB: 1},
        {data: "{AMToken,0x0}", callTB: 1},
        {data: 0xDEADBEEF},
        {data: 0xFEEDDEED, last: 1, callTB: 1},
        {data: 0sdbgContinue, callTB: 1}
      ]}
    - Parallel_Section_2:
      - axis: {name: axis_handler, payload: [
        {data: "{AMHeader,0xAA,0xCC,0,0xE,1,2}"},
        {data: "{AMToken,0x0}"},
        {data: 0xDEADBEEF},
        {data: 0xFEEDDEED}
      ]}
      - timestamp: End
      - macro: END

Wait_Conditions:
  - {condition: "wait(AXIS_HANDLER.tvalid == $value)", key: "axis_handler_tvalid"}